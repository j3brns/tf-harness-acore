from bedrock_agentcore import BedrockAgentCoreApp
import logging

# Configure logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

app = BedrockAgentCoreApp()

@app.entrypoint
def invoke(payload, context=None):
    """
    Primary entrypoint for the AgentCore runtime.
    """
    logger.info(f"Invoked with payload: {payload}")
    
    # Extract input from common payload structures
    user_input = payload.get("input") or payload.get("prompt") or "empty"
    
    return {
        "status": "success", 
        "message": f"Hello from {{ agent_name }}! I received: {user_input}", 
        "payload": payload
    }

if __name__ == "__main__":
    # Local dev runner
    app.run()
